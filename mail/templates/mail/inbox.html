{% extends 'mail/layout.html' %}
{% load static %}
{% block body %}
  <div class="container-fluid email-container">
    <!-- Email Header -->
    <div class="row py-3 email-header-row align-items-center mb-3">
      <div class="col-md-6 mb-2 mb-md-0">
        <h2 class="app-title">
          <i class="fas fa-envelope text-primary mr-2"></i>
          <span class="text-primary font-weight-bold">Mail</span>
          <small class="text-muted ml-2">{{ request.user.email }}</small>
        </h2>
      </div>
      <div class="col-md-6">
        <div class="d-flex justify-content-md-end justify-content-center">
          <button class="btn btn-sm btn-outline-primary mx-1" id="inbox"><i class="fas fa-inbox mr-1"></i> Inbox</button>
          <button class="btn btn-sm btn-outline-primary mx-1" id="compose"><i class="fas fa-pen mr-1"></i> Compose</button>
          <button class="btn btn-sm btn-outline-primary mx-1" id="sent"><i class="fas fa-paper-plane mr-1"></i> Sent</button>
          <button class="btn btn-sm btn-outline-primary mx-1" id="archived"><i class="fas fa-archive mr-1"></i> Archived</button>
          <a class="btn btn-sm btn-outline-danger mx-1" href="{% url 'logout' %}"><i class="fas fa-sign-out-alt mr-1"></i> Log Out</a>
        </div>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="row">
      <div class="col-12">
        <div class="card shadow-sm">
          <div class="card-body p-0">
            <!-- Emails View -->
            <div id="emails-view" class="p-3"></div>

            <!-- Compose View -->
            <div id="compose-view" class="p-3">
              <h3 class="mb-4 text-primary"><i class="fas fa-pen-fancy mr-2"></i>New Email</h3>
              <form id="compose-form">
                {% csrf_token %}
                <div class="form-group">
                  <label for="compose-from"><i class="fas fa-user mr-2"></i>From:</label>
                  <input disabled class="form-control" id="compose-from" value="{{ request.user.email }}" />
                </div>
                <div class="form-group">
                  <label for="compose-recipients"><i class="fas fa-users mr-2"></i>To:</label>
                  <input id="compose-recipients" class="form-control" placeholder="Recipient email(s)" />
                  <small class="text-muted">Separate multiple recipients with commas</small>
                </div>
                <div class="form-group">
                  <label for="compose-subject"><i class="fas fa-heading mr-2"></i>Subject:</label>
                  <input class="form-control" id="compose-subject" placeholder="Subject" />
                </div>
                <div class="form-group">
                  <label for="compose-body"><i class="fas fa-file-alt mr-2"></i>Message:</label>
                  <textarea class="form-control" id="compose-body" placeholder="Write your message here..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary"><i class="fas fa-paper-plane mr-2"></i>Send Email</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <style>
    body {
      background-color: #f8f9fa;
    }
    
    .email-container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .fa-envelope {
      font-size: 1.75rem;
    }
    
    .app-title {
      font-size: 1.75rem;
    }
    
    .btn-outline-primary {
      color: #4285f4;
      border-color: #4285f4;
    }
    
    .btn-outline-primary:hover,
    .btn-outline-primary.active {
      background-color: #4285f4;
      border-color: #4285f4;
      color: white;
    }
    
    .text-primary {
      color: #4285f4 !important;
    }
    
    .btn-primary {
      background-color: #4285f4;
      border-color: #4285f4;
    }
    
    .btn-primary:hover {
      background-color: #3367d6;
      border-color: #3367d6;
    }
    
    #compose-view {
      display: none;
    }
	
	.fa-pen-fancy {
	  font-size: 1.5rem;
	}
    
    textarea {
      min-height: 300px;
    }
    
    .email-header-row {
      border-bottom: 1px solid #dee2e6;
    }
    
    .card {
      border: none;
      border-radius: 8px;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .btn-sm {
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
      }
    
      .app-title {
        font-size: 1.5rem;
      }
    
      .email-header-row {
        text-align: center;
      }
    }
  </style>
{% endblock %}

{% block script %}
  <script src="{% static 'mail/inbox.js' %}"></script>
{% endblock %}
